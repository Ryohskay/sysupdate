#!/usr/bin/env bash

# This is a script to let users update user-installed commands.
# remember current directory
CURR_DIR=`pwd`

# sdkman
if [ $(command -v sdk) ]; then
    echo "updating sdk toolchain"
    sdk update
fi

# rustup
if [ $(command -v rustup) ]; then
    echo "updating Rust toolchain"
    rustup update
fi

# pip?
# pyenv
if $(test -d $HOME/.pyenv); then
    cd $HOME/.pyenv
    echo "updating pyenv git tree under `pwd`"
    git pull --rebase
    cd $CURR_DIR
fi

# rbenv
if $(test -d $HOME/.rbenv); then
    cd $HOME/.rbenv
    echo "updating rbenv git tree under `pwd`"
    git pull --rebase
    # ruby-build
    if $(test -d $(rbenv root)/plugins/ruby-build); then
        "updating ruby-build git tree under `pwd`"
        git -C "$(rbenv root)"/plugins/ruby-build pull
    fi
fi

# nvm

# yarn
if $(test -d $HOME/.yarn); then
    cd $HOME
    echo "updating yarn packages"
    yarn upgrade
    cd $CURR_DIR
fi
